<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>

<body>
    <h1 class="titolo">Modifica i dati dell'ordine</h1>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <div class="dati">
        <form action="update" method="post">
            <div class="cornice1" id="ord">

            </div>
            <br>
            <div class="cornice2" id="anticipo">

            </div>
            <br>
            <div class="cornice1" id="Data">
                <p>Data ordine</p>
                <input class="campo" name="ord_date" type="date" min="2000-01-02" max="2100-12-31" required/>
            </div>
            <br>
            <div class="cornice2" id="codice_utente">
                <p>Codice cliente&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; Codice agente</p>
                <select class="campoCliente" name="cust_code" required>
                    {% for row in customers %}
                        <option value="{{row[0]}}"> {{row[0]}} </option>
                    {% endfor %}
                </select>
                    <input class="campoAgente2" name="agent_code" type="text" value="{{session['username']}}" readonly/>
            </div>
            <br>
            <div class="cornice3" id="description">
                <p>Descrizione ordine</p>
                <textarea class="campoDescrizione" name="ord_description" maxlength="60" placeholder="Descrizione ordine..." required></textarea>
            </div>
            <br><br>
            <input class="bt1" type="submit" value="Modifica"/>
        </form>
        <form>
            <input class="bt2" type="button" onclick="history.go(-1);return true;" value="Indietro"/>
        </form>
    </div>

</body>
</html>
<script>
    username = $(this).attr('num_ord');
    $.ajax({

        url: "/api/orders/dataorder?num_ord=" + username,
        method: 'GET',
        dataType: 'json',
        success: function (data) {
            console.log(data);
            var event_data = '';
            $.each(data, function (index, value) {
                event_data = '<p>NÂ° ordine</p>';
                event_data+='<input class="campo" name="ord_num" type="text" placeholder="000000" value=' + data.num_ord + 'readonly/>';
                event_data1 =' <p>Prezzo Anticipo</p>';
                event_data1+='<input class="campo" name="ord_amount" type="text" placeholder="0.00" maxlength="15" pattern="[0-9]+\.[0-9]{2}"value='+data.importOrder+'required/>';
                event_data1 += '<input class="campo" name="advance_amount" type="text" placeholder="0.00" maxlength="15" pattern="[0-9]+\.[0-9]{2}"value='+data.advance_ord+' required/>';


            });
            $("#num_ord").append(event_data);
            $("#anticipo").append(event_data1);
        },
    })
</script>
